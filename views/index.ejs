<!DOCTYPE html>
<html ng-app="myApp">
<head>
  <meta charset="utf-8">
  <title>Temperature Logger</title>
  <style>
    table {
      border-collapse: collapse;
      width: 30%;
    }

    th, td {
      text-align: left;
      padding: 8px;
    }

    tr:nth-child(even){background-color: #f2f2f2}
    tr:nth-child(even){background-color: #F5F5DC}
  </style>
</head>
<body>

<h1>Home Automation Demo</h1>

<div ng-controller="appCltr">
  <table>
    <tr>
      <th>Temperature reading (°C): </th>
      <th>{{data}}</th>
    </tr>
    <tr>
      <th>Humidity reading (g⁄m^3 ): </th>
      <th></th>
    </tr>
    <tr>
      <th>Outside Temperature reading (°C): </th>
      <th>{{temperature_data}}</th>
    </tr>
    <tr>
      <th>Outside Humidity reading (--): </th>
      <th>{{humidity_data}}</th>
    </tr>
  </table>
  <li ng-repeat="new in news">
    {{ new.news }}
  </li>
</div>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.0/angular.min.js"></script>
  <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
  <script>
      var app = angular.module('myApp', []);
      var socket = io();

      app.controller('appCltr', ['$scope', function($scope){
          socket.on('port', function(port){
              $scope.$apply(function(){
                  $scope.data = port;
                  console.log(port);
              });
          });

          socket.on('temperature_port', function(temperature_port) {
              $scope.$apply(function () {
                  $scope.temperature_data = temperature_port;
                  console.log(temperature_port);
              });
          });
          socket.on('humidity_port', function(humidity_port) {
              $scope.$apply(function () {
                  $scope.humidity_data = humidity_port;
                  console.log(humidity_port);
              });
          });
          socket.on('news_port', function(news) {
              $scope.$apply(function () {
                  $scope.news = news;
                  //console.log()
              });
          });
          }]);
  </script>


</body>
</html>

